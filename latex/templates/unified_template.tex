% Layout
\usepackage[a4paper,top=2cm,bottom=2cm]{geometry}
\usepackage[colorlinks]{hyperref}
% \usepackage[allbordercolors={1 0 0}]{hyperref}
% \usepackage[hidelinks]{hyperref}
\usepackage{lastpage}       % ``n of m'' page numbering
\usepackage{pdflscape} % to allow some pages to be landscaped, with \begin{landscape}
\usepackage{parskip}
\usepackage{setspace}  % for the \onehalfspacing command for 振り仮名 support

% File management
\usepackage{subfiles}
\usepackage{zref-xr} % for references to labels across subfiles

% Font
% \usepackage{fontspec}  % LuaLaTeX-specific; see lualatex-doc S1.2
% \defaultfontfeatures{Ligatures=TeX}
\usepackage{cmap} % allow ff / fi ligatures to be searchable
\usepackage[normalem]{ulem} % strikethrough
\usepackage[soul]{lua-ul} % for highlighting via \hl and underline via \ul. LuaLaTeX version of soul ourtesy of https://tex.stackexchange.com/a/586053
\usepackage{luacolor}  % LuaLaTeX version of soul courtesy of https://tex.stackexchange.com/a/586053

% Language support
% \usepackage{textgreek}  % Allows greek characters in source

% Figures
\usepackage{graphicx}
% \usepackage{graphbox}  % adds [align=c] option to includegraphics, courtesy of https://tex.stackexchange.com/a/350374
\usepackage{float}
\usepackage{caption}
\usepackage{placeins}  % for the \FloatBarrier command

% Tables
\usepackage{hhline}         % Horizontal lines in tables
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{longtable}

% Colours
\usepackage{xcolor}
\newcommand{\textorange}[1]{\textcolor{orange}{#1}}
\newcommand{\textred}[1]{\textcolor{red}{#1}}
\newcommand{\textwhite}[1]{\textcolor{white}{#1}}
\newcommand{\textblue}[1]{\textcolor{blue}{#1}}
\newcommand{\textgreen}[1]{\textcolor{codegreen}{#1}}
\newcommand{\textpurple}[1]{\textcolor{codepurple}{#1}}
\newcommand{\textlightgrey}[1]{\textcolor{lightgray}{#1}}
\newcommand{\textgrey}[1]{\textcolor{gray}{#1}}
\newcommand{\textblack}[1]{\textcolor{black}{#1}}

% Bibliography
\usepackage{cite} % compress long lists of citations like [1, 2, 3, 4] into [1--4]. Courtesy of https://tex.stackexchange.com/a/15114
\usepackage{todonotes}

% Code
\usepackage{verbatim}
\usepackage{listings}
\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codebg}{rgb}{0.96, 0.96, 0.96}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{codered}{rgb}{1, 0.9, 0.9}
\lstset{
    basicstyle=\footnotesize, % to make lstlistings environment have the same font as verbatim
    numbers=left,
    numbersep=-2.5ex,
    backgroundcolor=\color{codebg},
    numberstyle=\tiny\color{codegray},
    commentstyle = \color{codegray},
    breaklines=true % to force code to comply to document/column margins
}
\usepackage{upquote}  % single quotes in code environments to appear as straight apostrophe rather than curved
% \usepackage{minted}
% \AtBeginEnvironment{minted}{\renewcommand{\fcolorbox}[4][]{#4}}  % Removes red box around greek letters in minted environment.
% \newcommand{\betweenmintedspace}{\vspace{-\medskipamount}\vspace{-2\baselineskip}\vspace{0.4pt}} % https://tex.stackexchange.com/a/590698
% \newcommand{\aftermintedspace}{\vspace{-2\baselineskip}\vspace{0.4pt}} % https://tex.stackexchange.com/a/590698
\usepackage{dirtree}

% Algorithms
% Comparison at https://tex.stackexchange.com/a/230789
% Courtesy of https://tex.stackexchange.com/a/29434
\usepackage{algorithm}
\usepackage[noEnd=true]{algpseudocodex}
\newcommand{\mquote}[1]{\text{``}{#1}\text{''}}  % Courtesy of https://tex.stackexchange.com/a/852/199513

% Basic LaTeX structures
\usepackage{enumitem} % For custom enumerate

% Description Labels
% Coutesy of https://tex.stackexchange.com/a/1248
\makeatletter
\let\orgdescriptionlabel\descriptionlabel
\renewcommand*{\descriptionlabel}[1]{%
    \let\orglabel\label
    \let\label\@gobble
    \phantomsection
    \edef\@currentlabel{#1\unskip}%
    %\edef\@currentlabelname{#1}%
    \let\label\orglabel
    \orgdescriptionlabel{#1}%
}
\makeatother

% % Paragraphs as subsubsubsections
% % Courtesy of https://tex.stackexchange.com/a/60212
% \usepackage{titlesec}
% \setcounter{secnumdepth}{5}
% \setcounter{tocdepth}{5}
% \titleformat{\paragraph}{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
% \titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
% \titleformat{\subparagraph}{\normalfont\normalsize\bfseries}{\thesubparagraph}{1em}{}
% \titlespacing*{\subparagraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
% \newcommand{\subsubsubsection}{\paragraph}
% \newcommand{\subsubsubsubsection}{\subparagraph}

% Mathematics
\usepackage{amsmath}  % for the \DeclareMathOperator macro
\usepackage{siunitx}        % Correct spacing of units
\usepackage{amssymb}        % Maths symbols
\usepackage{centernot}
\usepackage{mathtools} % for small matrices
\usepackage{cancel}
\usepackage{bm}  % \bm command to make things bold, is a better version of \boldsymbol
\allowdisplaybreaks % From amsmath: allows align to span pages
\newcommand\perpendicular{\perp}
\newcommand{\evalat}[2]{\left. #1 \right\rvert#2}
\newcommand{\pmat}[1]{\begin{pmatrix}#1\end{pmatrix}}
\newcommand{\bmat}[1]{\begin{bmatrix}#1\end{bmatrix}}
\newcommand{\psmat}[1]{\begin{psmallmatrix}#1\end{psmallmatrix}}
\newcommand{\vmat}[1]{\begin{vmatrix}#1\end{vmatrix}}

